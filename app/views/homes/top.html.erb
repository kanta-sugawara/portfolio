<main>
  <p id="notice"><%= flash[:notice] %></p>
  <div class='container px-5 px-sm-0'>
    <div class='row'>
      <div class='col-md-3'>
        <% if user_signed_in? %>
          <%= render partial: "users/user_info", locals: { user: @user } %>
        <% else %>
          <h2>ようこそ!<br />
          ポートフォリオへ</h2>
          <p>本サイトはゲームアプリのレビューサイトです<br />
          気になるゲームの課金額を知りたい方へ</p>
          <div class="alert alert-danger">
            <p>レビューの詳細を見るためには<br />
            ログインまたはユーザー登録が必要です</p>
          </div>
        <% end %>
      </div>
      <div class='col-md-8 offset-md-1'>
        <table class='table table-hover table-inverse'>
          <thead>
            <tr>
              <th>新着レビュー</th>
              <th>タイトル</th>
              <th>本文</th>
              <th>評価</th>
              <th colspan="4"></th>
            </tr>
          </thead>
          <tbody>
            <% @reviews.each do |review| %>
              <tr>
                <td>
                  <%= link_to user_path(review.user) do %>
                    <%= attachment_image_tag review, :review_image, fallback: "default-image.jpg", size: "100x100" %>
                    <%= review.user.name %>
                  <% end %>
                </td>
                <td><%= link_to review.title, review_path(review) %></td>
                <td><%= review.body %></td>
                <td><%= review.rate %>点</td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <%= paginate @reviews %>
      </div>
    </div>
  </div>
</main>